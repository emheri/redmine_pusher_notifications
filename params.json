{"name":"Redmine Pusher Notifications","tagline":"A Redmine plugin which makes notifying your Redmine instance easy ;)","body":"This plugin is designed to integrate the [Pusher Notification System](http://pusher.com) in Redmine to display nice notifications in Growl style.\r\n\r\nIt aims to serve as a central point to store Pusher configuration.\r\n\r\nIt relies on the  [acts_as_notifiable_redmine](https://github.com/jbox-web/acts_as_notifiable_redmine) gem so plugins developpers can access to the DSL provided to register their own channels and events (see the doc below).\r\n\r\nThe [acts_as_notifiable_redmine](https://github.com/jbox-web/acts_as_notifiable_redmine) also provides a method to send **asynchronous** notifications via Pusher.\r\n\r\nIt also relies on [gritter](https://github.com/RobinBrouwer/gritter) gem to display notifications so plugins developpers also have access to its functionalities in their controllers like [```gflash```](https://github.com/RobinBrouwer/gritter#gflash) **synchronous** notifications ;).\r\n\r\nYou can take a look to the [```pusher```](https://github.com/jbox-web/redmine_pusher_notifications/blob/devel/app/controllers/pusher_controller.rb) controller which implements the both methods.\r\n\r\n![screenshot](https://raw.github.com/jbox-web/redmine_pusher_notifications/gh-pages/images/screenshot.png)\r\n\r\n## Code status\r\n\r\n* [![Code Climate](https://codeclimate.com/github/jbox-web/redmine_pusher_notifications.png)](https://codeclimate.com/github/jbox-web/redmine_pusher_notifications)\r\n* [![Dependency Status](https://gemnasium.com/jbox-web/redmine_pusher_notifications.svg)](https://gemnasium.com/jbox-web/redmine_pusher_notifications)\r\n\r\n## Requirements\r\n\r\n* Ruby 1.9.x or 2.0.x\r\n* a working [Redmine](http://www.redmine.org/) installation\r\n* a free account on [Pusher](http://pusher.com)\r\n* [acts_as_notifiable_redmine](https://github.com/jbox-web/acts_as_notifiable_redmine) gem\r\n* [gritter](https://github.com/RobinBrouwer/gritter) gem\r\n\r\n## Installation\r\n  \r\n    ## Before install the plugin, stop Redmine!\r\n    \r\n    root$ su - redmine\r\n    redmine$ cd REDMINE_ROOT/plugins\r\n    redmine$ git clone https://github.com/jbox-web/redmine_bootstrap_kit.git\r\n    redmine$ git clone https://github.com/jbox-web/redmine_pusher_notifications.git\r\n    redmine$ cd redmine_pusher_notifications/\r\n    redmine$ git checkout v1.0.2\r\n    redmine$ cd REDMINE_ROOT\r\n    redmine$ bundle install\r\n\r\n    ## After install the plugin, start Redmine!\r\n\r\n## Configuration\r\n\r\nGo to the plugin settings page within Redmine interface to configure your Pusher account informations. That's all!\r\n\r\n## Plugin developpers\r\n\r\nIf you want to integrate Pusher async notifications in your plugin, or just Gitter with ```gflash``` you may need to register your own channels and events in your ```init.rb``` file : each channel can have many events. It may also have an optional ```target``` parameter which can be a string or a Proc.\r\n\r\n    ## it must be OUTSIDE of the Redmine::Plugin.register block\r\n    \r\n    ActsAsNotifiableRedmine::Notifications.register_channel :channel_test do\r\n      target Proc.new { User.current.login }\r\n      event  :event1, :sticky => true\r\n      event  :event2, :sticky => false\r\n      event  :event3\r\n    end\r\n    \r\n    ActsAsNotifiableRedmine::Notifications.register_channel :broadcast do\r\n      target 'broadcast'\r\n      event  :event1, :sticky => true\r\n      event  :event2, :sticky => false\r\n      event  :event3\r\n    end\r\n\r\nThen to send notifications you have 2 options :\r\n* **asynchronous** notifications via Pusher\r\n* **synchronous** notifications sent by the controller\r\n\r\nFor **asynchronous** notifications :\r\n\r\n    ActsAsNotifiableRedmine::Notifications.send_notification([channel.token], event.name, {:title => 'Hello!', :message => 'This is a test message !'})\r\n\r\n**Note :** The logic to determine wether or not to send a notification is let to the developer. You can easily do this with callbacks :\r\n\r\n    class Comment < ActiveRecord::Base\r\n        has_many :watchers\r\n        after_create :send_notification\r\n        \r\n        private\r\n        \r\n            def send_notification\r\n                channels = []\r\n                watchers.each do |watcher|\r\n                    token = '<channel_name>-' + watcher.login\r\n                    channels.push(token)\r\n                end\r\n                ActsAsNotifiableRedmine::Notifications.send_notification(channels, <event_name>, {:title => 'Hello!', :message => 'This is a test message !'})\r\n            end\r\n    end\r\n\r\nFor **synchronous** notifications :\r\n\r\nIn a controller :\r\n\r\n    def test\r\n      data = {}\r\n      data[:message] = 'Hello!'\r\n      data[:sticky] = true\r\n      data[:image] = \"<img class=\\\"gritter-image\\\" src=\\\"/plugin_assets/redmine_pusher_notifications/images/ok.png\\\">\"\r\n      gflash :now, :success => { :value => data[:message], :sticky => data[:sticky], :image => data[:image] }\r\n    end\r\n\r\nIn a JS partial :\r\n\r\n    $(document).ready(function() {\r\n      <%= gflash :js => true %>\r\n    });\r\n\r\nIn a HTML partial :\r\n\r\n    <%= link_to 'Test me!', test_path, :remote => true %>\r\n\r\nFor more details, take a look at [gritter](https://github.com/RobinBrouwer/gritter#gflash).\r\n\r\n## Copyrights & License\r\nRedmine Pusher Notifications is completely free and open source and released under the [MIT License](https://github.com/jbox-web/redmine_pusher_notifications/blob/devel/LICENSE).\r\n\r\nCopyright (c) 2013-2014 Nicolas Rodriguez (nrodriguez@jbox-web.com), JBox Web (http://www.jbox-web.com) [![endorse](https://api.coderwall.com/n-rodriguez/endorsecount.png)](https://coderwall.com/n-rodriguez)\r\n\r\n\r\n## Contribute\r\n\r\nYou can contribute to this plugin in many ways such as :\r\n* Helping with documentation\r\n* Contributing code (features or bugfixes)\r\n* Reporting a bug\r\n* Submitting translations\r\n\r\nYou can also donate :)\r\n\r\n[![Donate](https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif)](https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=FBT7E7DAVVEEU)\r\n","google":"UA-36504891-3","note":"Don't delete this file! It's used internally to help with page regeneration."}